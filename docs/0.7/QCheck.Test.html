<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="QCheck.TestResult.html">
<link rel="next" href="QCheck.Fn.html">
<link rel="Up" href="QCheck.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="QCheck" rel="Chapter" href="QCheck.html">
<link title="QCheck_runner" rel="Chapter" href="QCheck_runner.html"><link title="Running the test" rel="Section" href="#6_Runningthetest">
<title>QCheck.Test</title>
</head>
<body>
<div class="navbar"><a class="pre" href="QCheck.TestResult.html" title="QCheck.TestResult">Previous</a>
&nbsp;<a class="up" href="QCheck.html" title="QCheck">Up</a>
&nbsp;<a class="post" href="QCheck.Fn.html" title="QCheck.Fn">Next</a>
</div>
<h1>Module <a href="type_QCheck.Test.html">QCheck.Test</a></h1>

<pre><span class="keyword">module</span> Test: <code class="code">sig</code> <a href="QCheck.Test.html">..</a> <code class="code">end</code></pre><hr width="100%">

<pre><span id="TYPEcell"><span class="keyword">type</span> <code class="type">'a</code> cell</span> </pre>
<div class="info ">
A single property test<br>
</div>


<pre><span id="VALfail_report"><span class="keyword">val</span> fail_report</span> : <code class="type">string -> 'a</code></pre><div class="info ">
Fail the test with some additional message that will
      be reported.<br>
<b>Since</b> 0.7<br>
</div>

<pre><span id="VALfail_reportf"><span class="keyword">val</span> fail_reportf</span> : <code class="type">('a, Format.formatter, unit, 'b) Pervasives.format4 -> 'a</code></pre><div class="info ">
Format version of <a href="QCheck.Test.html#VALfail_report"><code class="code">QCheck.Test.fail_report</code></a><br>
<b>Since</b> 0.7<br>
</div>

<pre><span id="VALmake_cell"><span class="keyword">val</span> make_cell</span> : <code class="type">?count:int -><br>       ?long_factor:int -><br>       ?max_gen:int -><br>       ?max_fail:int -><br>       ?small:('a -> int) -><br>       ?name:string -> 'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -> ('a -> bool) -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a></code></pre><div class="info ">
<code class="code">make_cell arb prop</code> builds a test that checks property <code class="code">prop</code> on instances
      of the generator <code class="code">arb</code>.<br>
</div>
<div class="param_info"><code class="code">count</code> : number of test cases to run, counting only
        the test cases which satisfy preconditions.</div>
<div class="param_info"><code class="code">long_factor</code> : the factor by which to multiply count, max_gen and
        max_fail when running a long test (default: 1).</div>
<div class="param_info"><code class="code">max_gen</code> : maximum number of times the generation function
        is called in total to replace inputs that do not satisfy
        preconditions (should be &gt;= count).</div>
<div class="param_info"><code class="code">max_fail</code> : maximum number of failures before we stop generating
        inputs. This is useful if shrinking takes too much time.</div>
<div class="param_info"><code class="code">small</code> : kept for compatibility reasons; if provided, replaces
        the field <code class="code">arbitrary.small</code>.
        If there is no shrinking function but there is a <code class="code">small</code>
        function, only the smallest failures will be printed.</div>
<div class="param_info"><code class="code">name</code> : the name of the test.</div>

<pre><span id="VALget_arbitrary"><span class="keyword">val</span> get_arbitrary</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a></code></pre>
<pre><span id="VALget_law"><span class="keyword">val</span> get_law</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a -> bool</code></pre>
<pre><span id="VALget_name"><span class="keyword">val</span> get_name</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> string</code></pre>
<pre><span id="VALset_name"><span class="keyword">val</span> set_name</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> string -> unit</code></pre>
<pre><span id="VALget_count"><span class="keyword">val</span> get_count</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> int</code></pre><div class="info ">
Get the count of a cell.<br>
<b>Since</b> 0.5.3<br>
</div>

<pre><span id="VALget_long_factor"><span class="keyword">val</span> get_long_factor</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> int</code></pre><div class="info ">
Get the long factor of a cell.<br>
<b>Since</b> 0.5.3<br>
</div>

<pre><code><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.Test"><span class="constructor">Test</span></span> <span class="keyword">:</span> <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a></code> <span class="keyword">-></span> <code class="type"><a href="QCheck.Test.html#TYPEt">t</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
Same as <code class="code">'a cell</code>, but masking the type parameter. This allows to
      put tests on different types in the same list of tests.<br>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>



<pre><span id="VALmake"><span class="keyword">val</span> make</span> : <code class="type">?count:int -><br>       ?long_factor:int -><br>       ?max_gen:int -><br>       ?max_fail:int -><br>       ?small:('a -> int) -><br>       ?name:string -> 'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -> ('a -> bool) -> <a href="QCheck.Test.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">make arb prop</code> builds a test that checks property <code class="code">prop</code> on instances
      of the generator <code class="code">arb</code>.
      See <a href="QCheck.Test.html#VALmake_cell"><code class="code">QCheck.Test.make_cell</code></a> for a description of the parameters.<br>
</div>
<br>
<h6 id="6_Runningthetest">Running the test</h6><br>

<pre><span id="EXCEPTIONTest_fail"><span class="keyword">exception</span> Test_fail</span> <span class="keyword">of</span> <code class="type">string * string list</code></pre>
<div class="info ">
Exception raised when a test failed, with the list of counter-examples.
      <code class="code">Test_fail (name, l)</code> means test <code class="code">name</code> failed on elements of <code class="code">l</code>.<br>
</div>

<pre><span id="EXCEPTIONTest_error"><span class="keyword">exception</span> Test_error</span> <span class="keyword">of</span> <code class="type">string * string * exn * string</code></pre>
<div class="info ">
Exception raised when a test raised an exception <code class="code">e</code>, with
      the sample that triggered the exception.
      <code class="code">Test_error (name, i, e, st)</code>
      means <code class="code">name</code> failed on <code class="code">i</code> with exception <code class="code">e</code>, and <code class="code">st</code> is the
      stacktrace (if enabled) or an empty string.<br>
</div>

<pre><span id="VALprint_instance"><span class="keyword">val</span> print_instance</span> : <code class="type">'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -> 'a -> string</code></pre>
<pre><span id="VALprint_c_ex"><span class="keyword">val</span> print_c_ex</span> : <code class="type">'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -> 'a <a href="QCheck.TestResult.html#TYPEcounter_ex">QCheck.TestResult.counter_ex</a> -> string</code></pre>
<pre><span id="VALprint_fail"><span class="keyword">val</span> print_fail</span> : <code class="type">'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -><br>       string -> 'a <a href="QCheck.TestResult.html#TYPEcounter_ex">QCheck.TestResult.counter_ex</a> list -> string</code></pre>
<pre><span id="VALprint_error"><span class="keyword">val</span> print_error</span> : <code class="type">?st:string -><br>       'a <a href="QCheck.html#TYPEarbitrary">QCheck.arbitrary</a> -><br>       string -> 'a <a href="QCheck.TestResult.html#TYPEcounter_ex">QCheck.TestResult.counter_ex</a> * exn -> string</code></pre>
<pre><span id="VALprint_test_fail"><span class="keyword">val</span> print_test_fail</span> : <code class="type">string -> string list -> string</code></pre>
<pre><span id="VALprint_test_error"><span class="keyword">val</span> print_test_error</span> : <code class="type">string -> string -> exn -> string -> string</code></pre>
<pre><span id="VALprint_collect"><span class="keyword">val</span> print_collect</span> : <code class="type">(string, int) Hashtbl.t -> string</code></pre><div class="info ">
Print "collect" results.<br>
<b>Since</b> 0.6<br>
</div>

<pre><span id="VALprint_stat"><span class="keyword">val</span> print_stat</span> : <code class="type">'a <a href="QCheck.html#TYPEstat">QCheck.stat</a> * (int, int) Hashtbl.t -> string</code></pre><div class="info ">
Print statistics.<br>
<b>Since</b> 0.6<br>
</div>

<pre><span id="VALcheck_result"><span class="keyword">val</span> check_result</span> : <code class="type">'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a <a href="QCheck.TestResult.html#TYPEt">QCheck.TestResult.t</a> -> unit</code></pre><div class="info ">
<code class="code">check_result cell res</code> checks that <code class="code">res</code> is <code class="code">Ok _</code>, and returns unit.
      Otherwise, it raises some exception.<br>
<b>Raises</b><ul><li><code>Test_error</code> if <code class="code">res = Error _</code></li>
<li><code>Test_error</code> if <code class="code">res = Failed _</code></li>
</ul>
</div>

<pre><code><span id="TYPEres"><span class="keyword">type</span> <code class="type"></code>res</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTres.Success"><span class="constructor">Success</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTres.Failure"><span class="constructor">Failure</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTres.FalseAssumption"><span class="constructor">FalseAssumption</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTres.Error"><span class="constructor">Error</span></span> <span class="keyword">of</span> <code class="type">exn * string</code></code></td>

</tr></table>



<pre><code><span id="TYPEevent"><span class="keyword">type</span> <code class="type">'a</code> event</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTevent.Generating"><span class="constructor">Generating</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTevent.Collecting"><span class="constructor">Collecting</span></span> <span class="keyword">of</span> <code class="type">'a</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTevent.Testing"><span class="constructor">Testing</span></span> <span class="keyword">of</span> <code class="type">'a</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTevent.Shrunk"><span class="constructor">Shrunk</span></span> <span class="keyword">of</span> <code class="type">int * 'a</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTevent.Shrinking"><span class="constructor">Shrinking</span></span> <span class="keyword">of</span> <code class="type">int * int * 'a</code></code></td>

</tr></table>



<pre><span id="TYPEhandler"><span class="keyword">type</span> <code class="type">'a</code> handler</span> = <code class="type">string -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a <a href="QCheck.Test.html#TYPEevent">event</a> -> unit</code> </pre>
<div class="info ">
Handler executed after each event during testing of an instance.<br>
</div>


<pre><span id="TYPEstep"><span class="keyword">type</span> <code class="type">'a</code> step</span> = <code class="type">string -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a -> <a href="QCheck.Test.html#TYPEres">res</a> -> unit</code> </pre>
<div class="info ">
Callback executed after each instance of a test has been run.
      The callback is given the instance tested, and the current results
      of the test.<br>
</div>


<pre><span id="TYPEcallback"><span class="keyword">type</span> <code class="type">'a</code> callback</span> = <code class="type">string -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a <a href="QCheck.TestResult.html#TYPEt">QCheck.TestResult.t</a> -> unit</code> </pre>
<div class="info ">
Callback executed after each test has been run.
      <code class="code">f name cell res</code> means test <code class="code">cell</code>, named <code class="code">name</code>, gave <code class="code">res</code>.<br>
</div>


<pre><span id="VALcheck_cell"><span class="keyword">val</span> check_cell</span> : <code class="type">?long:bool -><br>       ?call:'a <a href="QCheck.Test.html#TYPEcallback">callback</a> -><br>       ?step:'a <a href="QCheck.Test.html#TYPEstep">step</a> -><br>       ?handler:'a <a href="QCheck.Test.html#TYPEhandler">handler</a> -><br>       ?rand:Random.State.t -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> 'a <a href="QCheck.TestResult.html#TYPEt">QCheck.TestResult.t</a></code></pre><div class="info ">
<code class="code">check_cell ~long ~rand test</code> generates up to <code class="code">count</code> random
      values of type <code class="code">'a</code> using <code class="code">arbitrary</code> and the random state <code class="code">st</code>. The
      predicate <code class="code">law</code> is called on them and if it returns <code class="code">false</code> or raises an
      exception then we have a counter-example for the <code class="code">law</code>.<br>
<b>Returns</b> the result of the test.<br>
</div>
<div class="param_info"><code class="code">long</code> : if <code class="code">true</code> then multiply the number of instances to generate
        by the cell's long_factor.</div>
<div class="param_info"><code class="code">call</code> : function called on each test case, with the result.</div>
<div class="param_info"><code class="code">step</code> : function called on each instance of the test case, with the result.</div>

<pre><span id="VALcheck_cell_exn"><span class="keyword">val</span> check_cell_exn</span> : <code class="type">?long:bool -><br>       ?call:'a <a href="QCheck.Test.html#TYPEcallback">callback</a> -><br>       ?step:'a <a href="QCheck.Test.html#TYPEstep">step</a> -><br>       ?rand:Random.State.t -> 'a <a href="QCheck.Test.html#TYPEcell">cell</a> -> unit</code></pre><div class="info ">
Same as <a href="QCheck.Test.html#VALcheck_cell"><code class="code">QCheck.Test.check_cell</code></a> but calls  <a href="QCheck.Test.html#VALcheck_result"><code class="code">QCheck.Test.check_result</code></a> on the result.<br>
<b>Raises</b><ul><li><code>Test_error</code> if <code class="code">res = Error _</code></li>
<li><code>Test_error</code> if <code class="code">res = Failed _</code></li>
</ul>
</div>

<pre><span id="VALcheck_exn"><span class="keyword">val</span> check_exn</span> : <code class="type">?long:bool -> ?rand:Random.State.t -> <a href="QCheck.Test.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Same as <a href="QCheck.Test.html#VALcheck_cell"><code class="code">QCheck.Test.check_cell</code></a> but calls  <a href="QCheck.Test.html#VALcheck_result"><code class="code">QCheck.Test.check_result</code></a> on the result.<br>
<b>Raises</b><ul><li><code>Test_error</code> if <code class="code">res = Error _</code></li>
<li><code>Test_error</code> if <code class="code">res = Failed _</code></li>
</ul>
</div>
</body></html>