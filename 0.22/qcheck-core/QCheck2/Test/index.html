<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Test (qcheck-core.QCheck2.Test)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">qcheck-core</a> &#x00BB; <a href="../index.html">QCheck2</a> &#x00BB; Test</nav><header class="odoc-preamble"><h1>Module <code><span>QCheck2.Test</span></code></h1><p>A test is a pair of a generator and a property that all generated values must satisfy.</p><p>The main features of this module are:</p><ul><li><a href="#val-make"><code>make</code></a> to create a test</li><li><a href="#val-make_neg"><code>make_neg</code></a> to create a negative test that is expected not to satisfy the tested property</li><li><a href="#val-check_exn"><code>check_exn</code></a> to run a single test with a simple runner.</li></ul><p>A test fails if the property does not hold for a given input. The <a href="#val-fail_report">simple</a> form or the <a href="#val-fail_reportf">rich</a> form) offer more elaborate forms to fail a test.</p><p>Note that while <a href="#val-check_exn"><code>check_exn</code></a> is provided for convenience to discover QCheck or to run a single test in <a href="https://opam.ocaml.org/blog/about-utop/">utop</a>, to run QCheck tests in your project you probably want to opt for a more advanced runner, or convert QCheck tests to your favorite test framework:</p><ul><li><a href="../../QCheck_base_runner/index.html"><code>QCheck_base_runner</code></a> for a QCheck-only runner (useful if you don't have or don't need another test framework)</li><li><code>QCheck_alcotest</code> to convert to Alcotest framework</li><li><code>QCheck_ounit</code> to convert to OUnit framework</li></ul></header><nav class="odoc-toc"><ul><li><a href="#running-the-test">Running the test</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cell"><a href="#type-cell" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a cell</span></span></code></div><div class="spec-doc"><p>A single property test on a value of type <code>'a</code>. A <a href="#type-t"><code>Test.t</code></a> wraps a <code>cell</code> and hides its type parameter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cell"><a href="#val-make_cell" class="anchor"></a><code><span><span class="keyword">val</span> make_cell : 
  <span>?if_assumptions_fail:<span>(<span>[ `Fatal <span>| `Warning</span> ]</span> * float)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?count:int <span class="arrow">&#45;&gt;</span></span>
  <span>?long_factor:int <span class="arrow">&#45;&gt;</span></span>
  <span>?negative:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?max_gen:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_fail:int <span class="arrow">&#45;&gt;</span></span>
  <span>?retries:int <span class="arrow">&#45;&gt;</span></span>
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?print:<span><span class="type-var">'a</span> <a href="../Print/index.html#type-t">Print.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?collect:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?stats:<span><span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Gen/index.html#type-t">Gen.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span></span></code></div><div class="spec-doc"><p><code>make_cell gen prop</code> builds a test that checks property <code>prop</code> on instances of the generator <code>gen</code>.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">name</span> <p>the name of the test.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">count</span> <p>number of test cases to run, counting only the test cases which satisfy preconditions.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">long_factor</span> <p>the factor by which to multiply count, max_gen and max_fail when running a long test (default: 1).</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">negative</span> <p>whether the test is expected not to satisfy the tested property.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">max_gen</span> <p>maximum number of times the generation function is called in total to replace inputs that do not satisfy preconditions (should be &gt;= count).</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">max_fail</span> <p>maximum number of failures before we stop generating inputs. This is useful if shrinking takes too much time.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">retries</span> <p>number of times to retry the tested property while shrinking.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">if_assumptions_fail</span> <p>the minimum fraction of tests that must satisfy the precondition for a success to be considered valid. The fraction should be between 0. and 1. A warning will be emitted otherwise if the flag is <code>`Warning</code>, the test will be a failure if the flag is <code>`Fatal</code>. (since 0.10)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">print</span> <p>used in <a href="../Print/index.html"><code>Print</code></a> to display generated values failing the <code>prop</code></p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">collect</span> <p>(* collect values by tag, useful to display distribution of generated *)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">stats</span> <p>on a distribution of values of type 'a</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cell_from_QCheck1"><a href="#val-make_cell_from_QCheck1" class="anchor"></a><code><span><span class="keyword">val</span> make_cell_from_QCheck1 : 
  <span>?if_assumptions_fail:<span>(<span>[ `Fatal <span>| `Warning</span> ]</span> * float)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?count:int <span class="arrow">&#45;&gt;</span></span>
  <span>?long_factor:int <span class="arrow">&#45;&gt;</span></span>
  <span>?negative:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?max_gen:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_fail:int <span class="arrow">&#45;&gt;</span></span>
  <span>?retries:int <span class="arrow">&#45;&gt;</span></span>
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>gen:<span>(<span><span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?shrink:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?print:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?collect:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>stats:<span><span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span></span></code></div><div class="spec-doc"><p>⚠️ Do not use, this is exposed for internal reasons only. ⚠️</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> <p>Migrate to QCheck2 and use <a href="#val-make_cell"><code>make_cell</code></a> instead.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_law"><a href="#val-get_law" class="anchor"></a><code><span><span class="keyword">val</span> get_law : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_name"><a href="#val-get_name" class="anchor"></a><code><span><span class="keyword">val</span> get_name : <span><span><span class="type-var">_</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_gen"><a href="#val-get_gen" class="anchor"></a><code><span><span class="keyword">val</span> get_gen : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Gen/index.html#type-t">Gen.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_print_opt"><a href="#val-get_print_opt" class="anchor"></a><code><span><span class="keyword">val</span> get_print_opt : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Print/index.html#type-t">Print.t</a></span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_collect_opt"><a href="#val-get_collect_opt" class="anchor"></a><code><span><span class="keyword">val</span> get_collect_opt : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_stats"><a href="#val-get_stats" class="anchor"></a><code><span><span class="keyword">val</span> get_stats : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_name"><a href="#val-set_name" class="anchor"></a><code><span><span class="keyword">val</span> set_name : <span><span><span class="type-var">_</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_count"><a href="#val-get_count" class="anchor"></a><code><span><span class="keyword">val</span> get_count : <span><span><span class="type-var">_</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the count of a cell.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5.3</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_long_factor"><a href="#val-get_long_factor" class="anchor"></a><code><span><span class="keyword">val</span> get_long_factor : <span><span><span class="type-var">_</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the long factor of a cell.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5.3</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_positive"><a href="#val-get_positive" class="anchor"></a><code><span><span class="keyword">val</span> get_positive : <span><span><span class="type-var">_</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Get the expected mode of a cell: positive indicates expected to satisfy the tested property, negative indicates expected not to satisfy the tested property.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><ol><li id="type-t.Test" class="def variant constructor anchored"><a href="#type-t.Test" class="anchor"></a><code><span>| </span><span><span class="constructor">Test</span> : <span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-t">t</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Same as <code>'a cell</code>, but masking the type parameter. This allows to put tests on different types in the same list of tests.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : 
  <span>?if_assumptions_fail:<span>(<span>[ `Fatal <span>| `Warning</span> ]</span> * float)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?count:int <span class="arrow">&#45;&gt;</span></span>
  <span>?long_factor:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_gen:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_fail:int <span class="arrow">&#45;&gt;</span></span>
  <span>?retries:int <span class="arrow">&#45;&gt;</span></span>
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?print:<span><span class="type-var">'a</span> <a href="../Print/index.html#type-t">Print.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?collect:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?stats:<span><span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Gen/index.html#type-t">Gen.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make gen prop</code> builds a test that checks property <code>prop</code> on instances of the generator <code>gen</code>. See <a href="#val-make_cell"><code>make_cell</code></a> for a description of the parameters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_neg"><a href="#val-make_neg" class="anchor"></a><code><span><span class="keyword">val</span> make_neg : 
  <span>?if_assumptions_fail:<span>(<span>[ `Fatal <span>| `Warning</span> ]</span> * float)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?count:int <span class="arrow">&#45;&gt;</span></span>
  <span>?long_factor:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_gen:int <span class="arrow">&#45;&gt;</span></span>
  <span>?max_fail:int <span class="arrow">&#45;&gt;</span></span>
  <span>?retries:int <span class="arrow">&#45;&gt;</span></span>
  <span>?name:string <span class="arrow">&#45;&gt;</span></span>
  <span>?print:<span><span class="type-var">'a</span> <a href="../Print/index.html#type-t">Print.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?collect:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?stats:<span><span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Gen/index.html#type-t">Gen.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make_neg gen prop</code> builds a test that checks property <code>prop</code> on instances of the generator <code>gen</code>. The test is considered negative, meaning that it is expected not to satisfy the tested property. This information is recorded in an underlying test <code>cell</code> entry and interpreted suitably by test runners. See <a href="#val-make_cell"><code>make_cell</code></a> for a description of the parameters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-test_get_count"><a href="#val-test_get_count" class="anchor"></a><code><span><span class="keyword">val</span> test_get_count : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-test_get_long_factor"><a href="#val-test_get_long_factor" class="anchor"></a><code><span><span class="keyword">val</span> test_get_long_factor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail_report"><a href="#val-fail_report" class="anchor"></a><code><span><span class="keyword">val</span> fail_report : <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Fail the test with some additional message that will be reported.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail_reportf"><a href="#val-fail_reportf" class="anchor"></a><code><span><span class="keyword">val</span> fail_reportf : <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Format version of <a href="#val-fail_report"><code>fail_report</code></a>.</p><p>Example:</p><pre class="language-ocaml"><code>Test.fail_reportf
  &quot;Value N = %i should be greater than M = %i for Foo = %a&quot; n m pp_foo foo</code></pre><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.7</li></ul></div></div><h4 id="running-the-test"><a href="#running-the-test" class="anchor"></a>Running the test</h4><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../Test_exceptions/index.html">Test_exceptions</a></span></code></summary><div class="odoc-spec"><div class="spec exception anchored" id="exception-Test_fail"><a href="#exception-Test_fail" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_fail</span> <span class="keyword">of</span> string * <span>string list</span></span></code></div><div class="spec-doc"><p>Exception raised when a test failed, with the list of counter-examples. <code>Test_fail (name, l)</code> means test <code>name</code> failed on elements of <code>l</code>.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Test_error"><a href="#exception-Test_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_error</span> <span class="keyword">of</span> string * string * exn * string</span></code></div><div class="spec-doc"><p>Exception raised when a test raised an exception <code>e</code>, with the sample that triggered the exception. <code>Test_error (name, i, e, st)</code> means <code>name</code> failed on <code>i</code> with exception <code>e</code>, and <code>st</code> is the stacktrace (if enabled) or an empty string.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Test_unexpected_success"><a href="#exception-Test_unexpected_success" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_unexpected_success</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Exception raised when a negative test failed. <code>Test_unexpected_success name</code> means test <code>name</code> failed to find an expected counter example.</p></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_instance"><a href="#val-print_instance" class="anchor"></a><code><span><span class="keyword">val</span> print_instance : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_c_ex"><a href="#val-print_c_ex" class="anchor"></a><code><span><span class="keyword">val</span> print_c_ex : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_fail"><a href="#val-print_fail" class="anchor"></a><code><span><span class="keyword">val</span> print_fail : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_fail_other"><a href="#val-print_fail_other" class="anchor"></a><code><span><span class="keyword">val</span> print_fail_other : <span>string <span class="arrow">&#45;&gt;</span></span> <span>msg:string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_expected_failure"><a href="#val-print_expected_failure" class="anchor"></a><code><span><span class="keyword">val</span> print_expected_failure : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_error"><a href="#val-print_error" class="anchor"></a><code><span><span class="keyword">val</span> print_error : 
  <span>?st:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a></span> * exn)</span> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_test_fail"><a href="#val-print_test_fail" class="anchor"></a><code><span><span class="keyword">val</span> print_test_fail : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_test_error"><a href="#val-print_test_error" class="anchor"></a><code><span><span class="keyword">val</span> print_test_error : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>exn <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_collect"><a href="#val-print_collect" class="anchor"></a><code><span><span class="keyword">val</span> print_collect : <span><span><span>(string, int)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Print &quot;collect&quot; results.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.6</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_stat"><a href="#val-print_stat" class="anchor"></a><code><span><span class="keyword">val</span> print_stat : <span><span>(<span><span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a></span> * <span><span>(int, int)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Print statistics.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.6</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_result"><a href="#val-check_result" class="anchor"></a><code><span><span class="keyword">val</span> check_result : <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>For a positive test <code>check_result cell res</code> checks that <code>res</code> is <code>Ok _</code>, and returns unit. For a negative test <code>check_result cell res</code> checks that <code>res</code> is <code>Failed _</code>, and returns unit. Otherwise, it raises some exception.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_fail</span> <p>if the test is positive and <code>res = Failed _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_unexpected_success</span> <p>if the test is negative and <code>res = Ok _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_error</span> <p>if <code>res = Error _</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-res"><a href="#type-res" class="anchor"></a><code><span><span class="keyword">type</span> res</span><span> = </span></code><ol><li id="type-res.Success" class="def variant constructor anchored"><a href="#type-res.Success" class="anchor"></a><code><span>| </span><span><span class="constructor">Success</span></span></code></li><li id="type-res.Failure" class="def variant constructor anchored"><a href="#type-res.Failure" class="anchor"></a><code><span>| </span><span><span class="constructor">Failure</span></span></code></li><li id="type-res.FalseAssumption" class="def variant constructor anchored"><a href="#type-res.FalseAssumption" class="anchor"></a><code><span>| </span><span><span class="constructor">FalseAssumption</span></span></code></li><li id="type-res.Error" class="def variant constructor anchored"><a href="#type-res.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> exn * string</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-event"><a href="#type-event" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a event</span></span><span> = </span></code><ol><li id="type-event.Generating" class="def variant constructor anchored"><a href="#type-event.Generating" class="anchor"></a><code><span>| </span><span><span class="constructor">Generating</span></span></code></li><li id="type-event.Collecting" class="def variant constructor anchored"><a href="#type-event.Collecting" class="anchor"></a><code><span>| </span><span><span class="constructor">Collecting</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-event.Testing" class="def variant constructor anchored"><a href="#type-event.Testing" class="anchor"></a><code><span>| </span><span><span class="constructor">Testing</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-event.Shrunk" class="def variant constructor anchored"><a href="#type-event.Shrunk" class="anchor"></a><code><span>| </span><span><span class="constructor">Shrunk</span> <span class="keyword">of</span> int * <span class="type-var">'a</span></span></code></li><li id="type-event.Shrinking" class="def variant constructor anchored"><a href="#type-event.Shrinking" class="anchor"></a><code><span>| </span><span><span class="constructor">Shrinking</span> <span class="keyword">of</span> int * int * <span class="type-var">'a</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-handler"><a href="#type-handler" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a handler</span></span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-event">event</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Handler executed after each event during testing of an instance.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-step"><a href="#type-step" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a step</span></span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-res">res</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Callback executed after each instance of a test has been run. The callback is given the instance tested, and the current results of the test.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-callback"><a href="#type-callback" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a callback</span></span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Callback executed after each test has been run. <code>f name cell res</code> means test <code>cell</code>, named <code>name</code>, gave <code>res</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_cell"><a href="#val-check_cell" class="anchor"></a><code><span><span class="keyword">val</span> check_cell : 
  <span>?long:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?call:<span><span class="type-var">'a</span> <a href="#type-callback">callback</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?step:<span><span class="type-var">'a</span> <a href="#type-step">step</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?handler:<span><span class="type-var">'a</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a></span></span></code></div><div class="spec-doc"><p><code>check_cell ~long ~rand test</code> generates up to <code>count</code> random values of type <code>'a</code> using <code>Gen.t</code> and the random state <code>st</code>. The predicate <code>law</code> is called on them and if it returns <code>false</code> or raises an exception then we have a counter-example for the <code>law</code>.</p><p>Note: <code>check_cell</code> ignores a test's polarity, acting as described above regardless of whether the tested cell is a positive or negative test.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">long</span> <p>if <code>true</code> then multiply the number of instances to generate by the cell's long_factor.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">call</span> <p>function called on each test case, with the result.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">step</span> <p>function called on each instance of the test case, with the result.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the result of the test.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_cell_exn"><a href="#val-check_cell_exn" class="anchor"></a><code><span><span class="keyword">val</span> check_cell_exn : 
  <span>?long:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?call:<span><span class="type-var">'a</span> <a href="#type-callback">callback</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?step:<span><span class="type-var">'a</span> <a href="#type-step">step</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?handler:<span><span class="type-var">'a</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-check_cell"><code>check_cell</code></a> but calls <a href="#val-check_result"><code>check_result</code></a> on the result. <code>check_cell test</code> honors test polarity and thus expects positive tests to succeed without finding a counterexample and expects negative tests to fail by finding one.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_fail</span> <p>if the test is positive and <code>res = Failed _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_unexpected_success</span> <p>if the test is negative and <code>res = Success _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_error</span> <p>if <code>res = Error _</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_exn"><a href="#val-check_exn" class="anchor"></a><code><span><span class="keyword">val</span> check_exn : <span>?long:bool <span class="arrow">&#45;&gt;</span></span> <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Checks the property against some test cases, and calls <a href="#val-check_result"><code>check_result</code></a>, which might raise an exception in case of failure. <code>check_exn test</code> honors test polarity and thus expects positive tests to succeed without finding a counterexample and expects negative tests to fail by finding one.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_fail</span> <p>if the test is positive and <code>res = Failed _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_unexpected_success</span> <p>if the test is negative and <code>res = Success _</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Test_error</span> <p>if <code>res = Error _</code></p></li></ul></div></div></div></body></html>