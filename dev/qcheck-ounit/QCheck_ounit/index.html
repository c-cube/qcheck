<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>QCheck_ounit (qcheck-ounit.QCheck_ounit)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">qcheck-ounit</a> &#x00BB; QCheck_ounit</nav><header class="odoc-preamble"><h1>Module <code><span>QCheck_ounit</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#conversion-of-tests-to-ounit-tests">Conversion of tests to OUnit Tests</a><ul><li><a href="#ounit-runners">OUnit runners</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="conversion-of-tests-to-ounit-tests"><a href="#conversion-of-tests-to-ounit-tests" class="anchor"></a>Conversion of tests to OUnit Tests</h2><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.9</li></ul><div class="odoc-spec"><div class="spec value" id="val-to_ounit_test" class="anchored"><a href="#val-to_ounit_test" class="anchor"></a><code><span><span class="keyword">val</span> to_ounit_test : 
  <span>?verbose:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?long:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../qcheck-core/QCheck2/Test/index.html#type-t">QCheck2.Test.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OUnit</span>.test</span></code></div><div class="spec-doc"><p><code>to_ounit_test ~rand t</code> wraps <code>t</code> into a OUnit test</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">verbose</span> <p>used to print information on stdout (default: <code>verbose()</code>)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">rand</span> <p>the random generator to use (default: <code>random_state ()</code>)</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_ounit_test_cell" class="anchored"><a href="#val-to_ounit_test_cell" class="anchor"></a><code><span><span class="keyword">val</span> to_ounit_test_cell : 
  <span>?verbose:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?long:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">_</span> <a href="../../qcheck-core/QCheck2/Test/index.html#type-cell">QCheck2.Test.cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OUnit</span>.test</span></code></div><div class="spec-doc"><p>Same as <a href="#val-to_ounit_test"><code>to_ounit_test</code></a> but with a polymorphic test cell</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;:::)" class="anchored"><a href="#val-(&gt;:::)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;:::) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../qcheck-core/QCheck2/Test/index.html#type-t">QCheck2.Test.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OUnit</span>.test</span></code></div><div class="spec-doc"><p>Same as <code>OUnit.(&gt;:::)</code> but with a list of QCheck2 tests</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_ounit2_test" class="anchored"><a href="#val-to_ounit2_test" class="anchor"></a><code><span><span class="keyword">val</span> to_ounit2_test : 
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../qcheck-core/QCheck2/Test/index.html#type-t">QCheck2.Test.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">OUnit2</span>.test</span></code></div><div class="spec-doc"><p><code>to_ounit2_test ?rand t</code> wraps <code>t</code> into a OUnit2 test</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">rand</span> <p>the random generator to use (default: a static seed for reproducibility), can be overridden with &quot;-seed&quot; on the command-line</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_ounit2_test_list" class="anchored"><a href="#val-to_ounit2_test_list" class="anchor"></a><code><span><span class="keyword">val</span> to_ounit2_test_list : 
  <span>?rand:<span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../qcheck-core/QCheck2/Test/index.html#type-t">QCheck2.Test.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">OUnit2</span>.test list</span></span></code></div><div class="spec-doc"><p><code>to_ounit2_test_list ?rand t</code> like <code>to_ounit2_test</code> but for a list of tests</p></div></div><h3 id="ounit-runners"><a href="#ounit-runners" class="anchor"></a>OUnit runners</h3><p>QCheck provides some custom runners for OUnit tests.</p><ul><li><a href="#val-run"><code>run</code></a> is used by <a href="https://github.com/vincent-hugot/qtest">qtest</a>.</li><li><a href="#val-run_tap"><code>run_tap</code></a> should be compatible with <a href="https://en.wikipedia.org/wiki/Test_Anything_Protocol">TAP</a>.</li></ul><p>Note that <code>OUnit</code>.run_test_tt or <code>OUnit</code>.run_test_tt_main can be used as well, in particular when QCheck tests are mixed with normal unit tests.</p><p>For OUnit2 you can use <code>OUnit2</code>.run_test_tt_main.</p><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span>?argv:<span>string array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">OUnit</span>.test <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>run test</code> runs the test, and returns an error code that is <code>0</code> if all tests passed, <code>1</code> otherwise. This is the default runner used by the comment-to-test generator.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">argv</span> <p>the command line arguments to parse parameters from (default <code>Sys.argv</code>)</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Arg.Bad</span> <p>in case <code>argv</code> contains unknown arguments</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Arg.Help</span> <p>in case <code>argv</code> contains &quot;--help&quot;</p><p>This test runner displays execution in a compact way, making it good for suites that have lots of tests.</p><p>Output example:</p><pre>random seed: 101121210
random seed: 101121210
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
Error: tests&gt;error_raise_exn

test `error_raise_exn` raised exception `QCheck_ounit_test.Error`
on `0 (after 62 shrink steps)`
Raised at file &quot;example/QCheck_ounit_test.ml&quot;, line 19, characters 20-25
Called from file &quot;src/QCheck.ml&quot;, line 846, characters 13-33

///////////////////////////////////////////////////////////////////////////////
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
Failure: tests&gt;fail_sort_id

fail_sort_id
///////////////////////////////////////////////////////////////////////////////
Ran: 4 tests in: 0.74 seconds.
WARNING! SOME TESTS ARE NEITHER SUCCESSES NOR FAILURES!</pre></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-run_tap" class="anchored"><a href="#val-run_tap" class="anchor"></a><code><span><span class="keyword">val</span> run_tap : <span><span class="xref-unresolved">OUnit</span>.test <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">OUnit</span>.test_results</span></code></div><div class="spec-doc"><p>TAP-compatible test runner, in case we want to use a test harness. It prints one line per test.</p></div></div></div></body></html>